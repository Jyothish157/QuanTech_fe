<section class="page">
  <header class="header">
    <div class="overview-text">
      <h1>Employee Management</h1>
      <p class="muted">Manage employee accounts, roles, and access permissions.</p>
    </div>
    <button class="btn primary" (click)="addNewEmployee()">
      <span>+</span> Add Employee
    </button>
  </header>

  <!-- Search Bar -->
  <div class="search-container">
    <input 
      type="text" 
      placeholder="Search employees..." 
      [(ngModel)]="searchTerm"
      (input)="searchEmployees()"
      class="search-input"
    >
  </div>

  <!-- Add/Edit Form -->
  <div class="card" *ngIf="showAddForm">
    <div class="card-title">
      {{ editingEmployee ? 'Edit Employee' : 'Add New Employee' }}
    </div>
    <form (ngSubmit)="editingEmployee ? updateEmployee() : addEmployee()">
      <div class="form-group">
        <label>Employee ID</label>
        <input 
          type="text" 
          [(ngModel)]="newEmployee.EmployeeID" 
          name="employeeId"
          [readonly]="!!editingEmployee"
          class="form-input"
        >
      </div>
      
      <div class="form-group">
        <label>Full Name *</label>
        <input 
          type="text" 
          [(ngModel)]="newEmployee.Name" 
          name="name"
          required
          class="form-input"
        >
      </div>
      
      <div class="form-group">
        <label>Department *</label>
        <select 
          [(ngModel)]="newEmployee.Department" 
          name="department"
          required
          class="form-input"
        >
          <option value="">Select Department</option>
          <option value="Customer Service">Customer Service</option>
          <option value="Sales">Sales</option>
          <option value="IT">IT</option>
          <option value="Marketing">Marketing</option>
          <option value="Finance">Finance</option>
          <option value="HR">HR</option>
          <option value="Operations">Operations</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Email</label>
        <input 
          type="email" 
          [(ngModel)]="newEmployee.Email" 
          name="email"
          class="form-input"
        >
      </div>
      
      <div class="form-group">
        <label>Role *</label>
        <select 
          [(ngModel)]="newEmployee.Role" 
          name="role"
          required
          class="form-input"
        >
          <option value="Employee">Employee</option>
          <option value="Manager">Manager</option>
        </select>
      </div>

      <div class="form-group">
        <label>Username</label>
        <input 
          type="text" 
          [(ngModel)]="newEmployee.Username" 
          name="username"
          class="form-input"
          placeholder="Auto-generated if empty"
        >
      </div>

      <div class="form-group">
        <label>Password</label>
        <input 
          type="password" 
          [(ngModel)]="newEmployee.Password" 
          name="password"
          class="form-input"
          placeholder="Auto-generated if empty"
        >
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn primary">
          {{ editingEmployee ? 'Update Employee' : 'Add Employee' }}
        </button>
        <button type="button" class="btn secondary" (click)="resetForm()">
          Cancel
        </button>
      </div>
    </form>
  </div>

  <!-- Employees List -->
  <div class="card">
    <div class="card-title">Employees ({{ filteredEmployees.length }})</div>
    <div class="table-container">
      <table class="data-table">
        <thead>
          <tr>
            <th>Employee ID</th>
            <th>Name</th>
            <th>Department</th>
            <th>Email</th>
            <th>Role</th>
            <th>Username</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let employee of filteredEmployees">
            <td>{{ employee.EmployeeID }}</td>
            <td>{{ employee.Name }}</td>
            <td>{{ employee.Department }}</td>
            <td>{{ employee.Email || 'N/A' }}</td>
            <td>
              <span class="badge" [class.manager]="employee.Role === 'Manager'">
                {{ employee.Role }}
              </span>
            </td>
            <td>{{ employee.Username || 'Not set' }}</td>
            <td>
              <button class="btn small" (click)="editEmployee(employee)">
                Edit
              </button>
              <button class="btn small danger" (click)="deleteEmployee(employee.EmployeeID)">
                Delete
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</section>
